# RL開発計画（FX取引システム）

## 1. 目的
- 為替時系列を使い、売買行動（Hold/Buy/Sell）を強化学習で最適化する。
- ベースライン（Buy&Hold, ランダム戦略）より高いリスク調整後リターンを目指す。

## 2. フェーズ設計

### Phase 1: データ整備
- OHLCVデータの取得（CSV or API）
- 欠損・異常値処理
- 特徴量作成（リターン、移動平均差、ボラティリティ、RSI）

### Phase 2: 取引環境構築
- 状態: テクニカル特徴量 + 現在ポジション
- 行動: Hold / Buy / Sell
- 報酬: 損益 - 取引コスト - 過剰取引ペナルティ

### Phase 3: エージェント学習
- MVP: 離散化 + Q-Learning
- 改良: PPO/DQNへ置換可能な抽象レイヤを維持

### Phase 4: 検証
- ウォークフォワード分割
- KPI: 累積損益、Sharpe、最大DD、勝率、平均保有期間

### Phase 5: 運用準備
- モデル保存/ロード
- リスク制御（最大損失停止、ポジション制限）
- ログ/監視（取引回数、連敗、ドリフト）

## 3. KPI（初期）
- 最大ドローダウン: 20%以内
- 日次Sharpe（年率換算）: 0.8以上
- 月次勝率: 50%以上
- 取引コスト考慮後に正の期待値

## 4. リスク管理
- 1トレードあたりの最大許容損失を資産の1%以下
- 連続損失時に取引停止（サーキットブレーカー）
- スプレッド急拡大時は新規エントリー禁止

## 5. このプロトタイプで実装する範囲
- Phase 1〜4の最小構成
- Q-Learningベースで再現可能な学習・バックテスト
